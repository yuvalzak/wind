.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.75);display:none;align-items:center;justify-content:center;padding:12px;z-index:9999;overflow:hidden;backdrop-filter:blur(4px);}#calibrateBackdrop{z-index:100000;}.modal{width:min(980px,98vw);height:calc(100vh - 24px);background:var(--surface);border-radius:var(--radius-lg);overflow:hidden;box-shadow:0 24px 80px rgba(0,0,0,0.8);border:1px solid var(--border);display:flex;flex-direction:column;margin:auto;}.modal-header{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:14px 16px;background:var(--surface2);border-bottom:1px solid var(--border);flex-shrink:0;}.modal-header .title{font-weight:900;color:var(--text);font-size:1.05em;letter-spacing:-0.01em;}.modal-header .close{border:1px solid var(--border);background:var(--surface3);color:var(--text);padding:8px 10px;border-radius:50%;cursor:pointer;font-weight:900;min-width:40px;min-height:40px;display:flex;align-items:center;justify-content:center;font-size:1em;transition:background 0.2s;}.modal-header .close:hover{background:rgba(255,255,255,0.1);}@media (max-width:768px){.modal-header .close{min-width:50px;min-height:50px;font-size:1.3em;}}.modal-body{padding:14px 16px;overflow-y:auto;flex:1 1 auto;min-height:0;-webkit-overflow-scrolling:touch;color:var(--text);}.settings-tabs-container{flex-shrink:0;background:var(--surface2);border-bottom:1px solid var(--border);overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none;}.settings-tabs-container::-webkit-scrollbar{display:none;}.settings-tab{padding:12px 20px;border:none;background:transparent;color:var(--text-sub);font-weight:700;cursor:pointer;border-bottom:3px solid transparent;transition:all 0.2s;font-size:0.92em;letter-spacing:0.01em;}.settings-tab:hover{color:var(--text);background:rgba(255,255,255,0.05);}.settings-tab.active{color:var(--green);border-bottom-color:var(--green);}.settings-content{display:none;}.settings-content.active{display:flex;flex-direction:column;flex:1 1 auto;min-height:0;overflow-y:auto;overflow-x:hidden;padding-top:4px;-webkit-overflow-scrolling:touch;}#map{width:100%;height:300px;border-radius:var(--radius);border:1px solid var(--border);overflow:hidden;}.map-modal-body #map{height:auto !important;flex:1 1 auto;min-height:150px;}@media (max-width:768px){#map{height:200px;}.map-modal-body #map{height:auto !important;min-height:120px;}}.leaflet-control-layers{border-radius:10px !important;border:1px solid var(--border) !important;box-shadow:0 2px 12px rgba(0,0,0,0.4) !important;background:var(--surface2) !important;}.leaflet-control-layers-expanded{padding:10px 12px !important;background:var(--surface2) !important;}.leaflet-control-layers-base label{font-weight:700 !important;color:var(--text) !important;font-size:0.92em !important;padding:6px 0 !important;display:flex !important;align-items:center !important;gap:8px !important;cursor:pointer !important;}.leaflet-control-layers-base label:hover{background:rgba(255,255,255,0.07) !important;border-radius:6px !important;}.leaflet-control-layers input[type="radio"]{width:18px !important;height:18px !important;cursor:pointer !important;}.pick-row{margin-top:10px;display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between;}.coords{font-weight:700;color:var(--text);font-size:0.95em;}.hint{color:var(--text-sub);font-weight:700;font-size:0.85em;}.input{border:1px solid var(--border);border-radius:var(--radius);padding:10px 14px;font-weight:700;color:var(--text);background:var(--surface3);min-width:220px;outline:none;}.input:focus{border-color:var(--green);box-shadow:0 0 0 2px var(--green-dim);}.select{border:1px solid var(--border);border-radius:var(--radius);padding:10px 14px;font-weight:700;color:var(--text);background:var(--surface3);min-width:200px;outline:none;}.name-save-line{display:flex;gap:10px;flex-wrap:wrap;align-items:center;}.search-box{margin-bottom:10px;display:flex;gap:8px;align-items:center;flex-wrap:wrap;}.search-input{flex:1;min-width:200px;border:1px solid var(--border);border-radius:var(--radius);padding:10px 14px;font-weight:700;color:var(--text);background:var(--surface3);outline:none;width:100%;}.search-input:focus{border-color:var(--green);}.search-suggestions{position:absolute;top:100%;left:0;right:0;background:var(--surface2);border:1px solid var(--border);border-radius:var(--radius);margin-top:4px;max-height:300px;overflow-y:auto;box-shadow:0 8px 24px rgba(0,0,0,0.5);z-index:1000;display:none;}.search-suggestions.active{display:block;}.search-suggestion-item{padding:12px 14px;cursor:pointer;border-bottom:1px solid var(--border);transition:background 0.15s;}.search-suggestion-item:last-child{border-bottom:none;}.search-suggestion-item:hover{background:rgba(255,255,255,0.06);}.search-suggestion-name{font-weight:700;color:var(--text);font-size:0.95em;margin-bottom:2px;}.search-suggestion-detail{font-weight:700;color:var(--text-sub);font-size:0.8em;}.search-btn{border:1px solid var(--border);background:var(--surface3);color:var(--text);padding:10px 16px;border-radius:999px;cursor:pointer;font-weight:700;white-space:nowrap;transition:background 0.2s;}.search-btn:hover:not(:disabled){background:var(--green);color:#000;}.search-btn:disabled{opacity:0.4;cursor:not-allowed;}@media (max-width:600px){.search-box{flex-direction:column;align-items:stretch;}.search-box > div,.search-input,.search-btn{width:100%;}.modal-backdrop{padding:0;align-items:flex-start;}.modal{width:100vw;height:100vh;border-radius:0;margin:0;}}.map-modal{display:flex;flex-direction:column;}.map-modal-body{display:flex;flex-direction:column;flex:1 1 auto;min-height:0;padding:8px 10px;gap:6px;overflow:hidden;}.map-modal-body #map{flex:1 1 auto;min-height:120px;height:auto;border-radius:10px;border:1px solid var(--border);}.map-search-row{display:flex;gap:6px;align-items:center;position:relative;}.map-search-wrap{flex:1;min-width:0;position:relative;}.map-latlon-row{display:flex;gap:6px;align-items:center;border-top:1px solid var(--border);padding-top:4px;}.map-input{width:100%;box-sizing:border-box;padding:9px 11px;border:1px solid var(--border);border-radius:9px;font-size:0.9em;font-weight:600;color:var(--text);outline:none;background:var(--surface3);min-width:0;}.map-input:focus{border-color:var(--green);box-shadow:0 0 0 2px var(--green-dim);}.map-btn{flex-shrink:0;padding:9px 12px;border:1px solid var(--border);border-radius:9px;background:var(--surface3);color:var(--text);font-size:0.9em;font-weight:700;cursor:pointer;white-space:nowrap;min-height:40px;display:flex;align-items:center;transition:background 0.2s;}.map-btn:active{background:rgba(255,255,255,0.1);}.map-btn-green{background:var(--green-dim);border-color:var(--green);color:var(--green);}.map-btn-close{background:var(--surface3);}.map-select{flex:1 1 100px;min-width:0;padding:9px 8px;border:1px solid var(--border);border-radius:9px;font-size:0.88em;font-weight:600;color:var(--text);outline:none;background:var(--surface3);}.map-save-btn{flex-shrink:0;padding:9px 14px;background:var(--green);color:#000;border:none;border-radius:9px;font-weight:900;font-size:0.9em;cursor:pointer;white-space:nowrap;min-height:40px;transition:background 0.2s;}.map-save-btn:disabled{opacity:0.4;cursor:not-allowed;}.map-save-btn:not(:disabled):active{background:#1ed760;}.map-coords{font-size:0.78em;color:var(--text-dim);font-weight:600;padding:2px 0;}.map-save-area{display:flex;flex-direction:column;gap:5px;border-top:1px solid var(--border);padding-top:6px;flex-shrink:0;}.map-save-row{display:flex;gap:5px;align-items:center;flex-wrap:wrap;}@media (max-width:400px){.map-save-row{flex-wrap:wrap;}.map-save-row .map-input,.map-save-row .map-select{flex:1 1 calc(50% - 5px);min-width:0;}}.myday-rule-row{display:flex;align-items:center;gap:10px;flex-wrap:wrap;padding:12px 14px;background:var(--surface2);border-radius:10px;border:1px solid var(--border);}.myday-rule-label{font-weight:700;color:var(--text);font-size:0.95em;min-width:120px;}.myday-rule-inputs{display:flex;align-items:center;gap:8px;flex-wrap:wrap;}.myday-op{padding:6px 10px;border:1px solid var(--border);border-radius:8px;font-size:0.9em;font-weight:600;background:var(--surface3);color:var(--text);cursor:pointer;}.myday-val{width:68px;padding:6px 10px;border:1px solid var(--border);border-radius:8px;font-size:0.9em;font-weight:600;text-align:center;background:var(--surface3);color:var(--text);}.myday-sep{font-size:0.85em;color:var(--text-sub);font-weight:600;}.myday-unit{font-size:0.85em;color:var(--text-sub);font-weight:700;}.google-signin-btn{display:inline-flex;align-items:center;justify-content:center;background:var(--surface3);color:var(--text);border:1px solid var(--border);border-radius:999px;padding:12px 24px;font-size:1em;font-weight:700;cursor:pointer;transition:all 0.2s;}.google-signin-btn:hover{background:rgba(255,255,255,0.1);}